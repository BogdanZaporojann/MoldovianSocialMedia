{"ast":null,"code":"import { profileAPI } from \"../api/api.js\";\nconst ADD_POST = 'ADD-POST';\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\nconst SET_STATUS = 'SET_STATUS';\nlet initialState = {\n  profileData: [{\n    id: 1,\n    text: 'Text 1',\n    likesCount: 1\n  }, {\n    id: 2,\n    text: 'Text 2',\n    likesCount: 2\n  }, {\n    id: 3,\n    text: 'Text 3',\n    likesCount: 3\n  }],\n  profile: null,\n  status: ''\n};\nexport const profileReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_POST:\n      {\n        let body = action.newPostText;\n        return { ...state,\n          profileData: [...state.profileData, {\n            likesCount: 1,\n            text: body\n          }],\n          newPostText: ''\n        };\n      }\n\n    case SET_USER_PROFILE:\n      {\n        return { ...state,\n          profile: action.profile\n        };\n      }\n\n    case SET_STATUS:\n      {\n        return { ...state,\n          status: action.status\n        };\n      }\n\n    default:\n      return state;\n  }\n};\nexport const addPost = newPostText => ({\n  type: ADD_POST,\n  newPostText\n});\nexport const setUserProfile = profile => ({\n  type: SET_USER_PROFILE,\n  profile\n});\nexport const setStatus = status => ({\n  type: SET_STATUS,\n  status\n});\nexport const getUserStatus = userId => async dispatch => {\n  let data = await profileAPI.getStatus(userId);\n  dispatch(setStatus(data));\n};\nexport const updateUserStatus = status => async dispatch => {\n  let data = await profileAPI.updateStatus(status);\n\n  if (data.resultCode === 0) {\n    dispatch(setStatus(status));\n  }\n};\nexport const getUserProfile = userId => async dispatch => {\n  let data = await profileAPI.getProfile(userId);\n  dispatch(setUserProfile(data));\n};","map":{"version":3,"names":["profileAPI","ADD_POST","SET_USER_PROFILE","SET_STATUS","initialState","profileData","id","text","likesCount","profile","status","profileReducer","state","action","type","body","newPostText","addPost","setUserProfile","setStatus","getUserStatus","userId","dispatch","data","getStatus","updateUserStatus","updateStatus","resultCode","getUserProfile","getProfile"],"sources":["/home/bogdan/Рабочий стол/neverGiveUp/src/redux/profile-reducer.ts"],"sourcesContent":["import {profileAPI} from \"../api/api.js\";\n\nconst ADD_POST= 'ADD-POST'\nconst SET_USER_PROFILE='SET_USER_PROFILE';\nconst SET_STATUS='SET_STATUS';\n\ntype PostType = {\n    id: number\n    text: string\n    likesCount: number\n}\n\nlet initialState = {\n    profileData: [\n        {\n            id: 1,\n            text: 'Text 1',\n            likesCount: 1\n        },\n        {\n            id: 2,\n            text: 'Text 2',\n            likesCount:2\n        },\n        {\n            id: 3,\n            text: 'Text 3',\n            likesCount:3\n        }\n    ] as Array<PostType>,\n    profile: null,\n    status:''\n}\n\nexport type InitialStateType = typeof initialState;\n\nexport const profileReducer = (state = initialState, action: any) : InitialStateType => {\n    switch (action.type){\n        case ADD_POST : {\n            let body = action.newPostText;\n            return {\n                ...state,\n                profileData: [...state.profileData, {likesCount: 1, text: body}],\n                newPostText: ''\n            }\n        }\n        case SET_USER_PROFILE: {\n            return {\n                ...state,\n                profile: action.profile\n            }\n        }\n        case SET_STATUS: {\n            return {\n                ...state,\n                status: action.status\n            }\n        }\n        default:\n            return state;\n    }\n}\n\n\nexport const addPost = (newPostText) => ({\n    type: ADD_POST,\n    newPostText\n})\n\nexport const setUserProfile = (profile) => ({\n    type: SET_USER_PROFILE,\n    profile\n})\n\nexport const setStatus = (status) => ({\n        type: SET_STATUS,\n        status\n    })\n\n\nexport const getUserStatus = (userId) => async (dispatch) => {\n    let data = await profileAPI.getStatus(userId)\n             dispatch(setStatus(data));\n\n}\n\nexport const updateUserStatus = (status) => async (dispatch) => {\n    let data = await profileAPI.updateStatus(status)\n        if(data.resultCode === 0) {\n            dispatch(setStatus(status))\n        }\n}\n\nexport const getUserProfile = (userId) => async (dispatch) => {\n        let data = await profileAPI.getProfile(userId)\n                dispatch(setUserProfile(data));\n    }\n"],"mappings":"AAAA,SAAQA,UAAR,QAAyB,eAAzB;AAEA,MAAMC,QAAQ,GAAE,UAAhB;AACA,MAAMC,gBAAgB,GAAC,kBAAvB;AACA,MAAMC,UAAU,GAAC,YAAjB;AAQA,IAAIC,YAAY,GAAG;EACfC,WAAW,EAAE,CACT;IACIC,EAAE,EAAE,CADR;IAEIC,IAAI,EAAE,QAFV;IAGIC,UAAU,EAAE;EAHhB,CADS,EAMT;IACIF,EAAE,EAAE,CADR;IAEIC,IAAI,EAAE,QAFV;IAGIC,UAAU,EAAC;EAHf,CANS,EAWT;IACIF,EAAE,EAAE,CADR;IAEIC,IAAI,EAAE,QAFV;IAGIC,UAAU,EAAC;EAHf,CAXS,CADE;EAkBfC,OAAO,EAAE,IAlBM;EAmBfC,MAAM,EAAC;AAnBQ,CAAnB;AAwBA,OAAO,MAAMC,cAAc,GAAG,YAA0D;EAAA,IAAzDC,KAAyD,uEAAjDR,YAAiD;EAAA,IAAnCS,MAAmC;;EACpF,QAAQA,MAAM,CAACC,IAAf;IACI,KAAKb,QAAL;MAAgB;QACZ,IAAIc,IAAI,GAAGF,MAAM,CAACG,WAAlB;QACA,OAAO,EACH,GAAGJ,KADA;UAEHP,WAAW,EAAE,CAAC,GAAGO,KAAK,CAACP,WAAV,EAAuB;YAACG,UAAU,EAAE,CAAb;YAAgBD,IAAI,EAAEQ;UAAtB,CAAvB,CAFV;UAGHC,WAAW,EAAE;QAHV,CAAP;MAKH;;IACD,KAAKd,gBAAL;MAAuB;QACnB,OAAO,EACH,GAAGU,KADA;UAEHH,OAAO,EAAEI,MAAM,CAACJ;QAFb,CAAP;MAIH;;IACD,KAAKN,UAAL;MAAiB;QACb,OAAO,EACH,GAAGS,KADA;UAEHF,MAAM,EAAEG,MAAM,CAACH;QAFZ,CAAP;MAIH;;IACD;MACI,OAAOE,KAAP;EAtBR;AAwBH,CAzBM;AA4BP,OAAO,MAAMK,OAAO,GAAID,WAAD,KAAkB;EACrCF,IAAI,EAAEb,QAD+B;EAErCe;AAFqC,CAAlB,CAAhB;AAKP,OAAO,MAAME,cAAc,GAAIT,OAAD,KAAc;EACxCK,IAAI,EAAEZ,gBADkC;EAExCO;AAFwC,CAAd,CAAvB;AAKP,OAAO,MAAMU,SAAS,GAAIT,MAAD,KAAa;EAC9BI,IAAI,EAAEX,UADwB;EAE9BO;AAF8B,CAAb,CAAlB;AAMP,OAAO,MAAMU,aAAa,GAAIC,MAAD,IAAY,MAAOC,QAAP,IAAoB;EACzD,IAAIC,IAAI,GAAG,MAAMvB,UAAU,CAACwB,SAAX,CAAqBH,MAArB,CAAjB;EACSC,QAAQ,CAACH,SAAS,CAACI,IAAD,CAAV,CAAR;AAEZ,CAJM;AAMP,OAAO,MAAME,gBAAgB,GAAIf,MAAD,IAAY,MAAOY,QAAP,IAAoB;EAC5D,IAAIC,IAAI,GAAG,MAAMvB,UAAU,CAAC0B,YAAX,CAAwBhB,MAAxB,CAAjB;;EACI,IAAGa,IAAI,CAACI,UAAL,KAAoB,CAAvB,EAA0B;IACtBL,QAAQ,CAACH,SAAS,CAACT,MAAD,CAAV,CAAR;EACH;AACR,CALM;AAOP,OAAO,MAAMkB,cAAc,GAAIP,MAAD,IAAY,MAAOC,QAAP,IAAoB;EACtD,IAAIC,IAAI,GAAG,MAAMvB,UAAU,CAAC6B,UAAX,CAAsBR,MAAtB,CAAjB;EACQC,QAAQ,CAACJ,cAAc,CAACK,IAAD,CAAf,CAAR;AACX,CAHE"},"metadata":{},"sourceType":"module"}